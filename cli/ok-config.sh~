#!/bin/bash

# Must be root
if test "`/usr/bin/id -u`" != 0 ; then
	echo "$0: You must be root to run this script" >& 2
	exit 1
fi
MYDIR=`dirname $0`
cd $MYDIR
CONFIG_PATH=config
[[ ! -d $CONFIG_PATH ]]&&mkdir $CONFIG_PATH

USAGE="$0 -u chongzhi -p 123456 -e eth0 -s"
while getopts :u:p:e OPTION ; do
	case "$OPTION" in
		u) user="$OPTARG" ;;
		p) pass="$OPTARG" ;;
		e) eth="$OPTARG" ;;
		\?) echo "$USAGE" ;
		exit 1
		;;
	esac
done

function setconfig() {
	if [ -z $2 ] ; then
		U=$2
	else
	fi
	read U
	if [ -z $U ] ; then
		echo "未更改"
		return
	fi
	if [ -f $CONFIG_PATH/$1 ] ; then
		echo "覆盖原$1"
		rm $CONFIG_PATH/$1 > /dev/null 2>&1
	fi
	echo $U > $CONFIG_PATH/$1
	chown root.root $CONFIG_PATH/$1
	chmod 600 $CONFIG_PATH/$1
}


#echo "请输入用户名"
#setconfig user chongzhi
#echo "请输入密码"
#setconfig pass 123456
#echo "请输入网关"
#setconfig eth eth0
echo $user
